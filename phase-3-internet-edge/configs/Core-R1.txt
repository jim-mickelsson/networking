! ------------------------------------------------------------------
! DEVICE: Core-R1
! ROLE:   Edge Router (NAT, ACL, OSPF, DHCP)
! LAB:    Phase 3 - Internet Edge Implementation
! ------------------------------------------------------------------

version 15.4
no service timestamps log datetime msec
no service timestamps debug datetime msec
no service password-encryption
!
hostname Core-R1
!
ip dhcp excluded-address 10.0.10.1
ip dhcp excluded-address 10.0.20.1
ip dhcp excluded-address 10.0.99.1
!
ip dhcp pool SALES_POOL
 network 10.0.10.0 255.255.255.0
 default-router 10.0.10.1
 dns-server 8.8.8.8
ip dhcp pool ENG_POOL
 network 10.0.20.0 255.255.255.0
 default-router 10.0.20.1
 dns-server 8.8.8.8
!
ip cef
no ipv6 cef
!
spanning-tree mode pvst
!
interface GigabitEthernet0/0/0
 description WAN Edge to ISP
 ip address 203.0.113.2 255.255.255.252
 ip nat outside
 duplex auto
 speed auto
!
interface GigabitEthernet0/0/1
 no ip address
 duplex auto
 speed auto
!
interface GigabitEthernet0/0/1.10
 description Gateway for Sales
 encapsulation dot1Q 10
 ip address 10.0.10.1 255.255.255.0
 ip nat inside
!
interface GigabitEthernet0/0/1.20
 description Gateway for Engineering
 encapsulation dot1Q 20
 ip address 10.0.20.1 255.255.255.0
 ip nat inside
!
interface GigabitEthernet0/0/1.99
 description Native VLAN MGT
 encapsulation dot1Q 99 native
 ip address 10.0.99.1 255.255.255.0
 ip nat inside
!
interface Serial0/1/0
 description WAN Link to Branch
 ip address 10.1.1.1 255.255.255.252
 ip nat inside
 clock rate 128000
!
interface Serial0/1/1
 no ip address
 clock rate 2000000
!
interface Vlan1
 no ip address
 shutdown
!
router ospf 1
 router-id 1.1.1.1
 log-adjacency-changes
 passive-interface default
 no passive-interface Serial0/1/0
 network 10.1.1.0 0.0.0.3 area 0
 network 10.0.0.0 0.0.255.255 area 0
 default-information originate
!
ip nat inside source list 1 interface GigabitEthernet0/0/0 overload
ip classless
ip route 0.0.0.0 0.0.0.0 203.0.113.1 
!
ip flow-export version 9
!
access-list 1 permit 10.0.0.0 0.255.255.255
!
line con 0
!
line aux 0
!
line vty 0 4
 login
!
end